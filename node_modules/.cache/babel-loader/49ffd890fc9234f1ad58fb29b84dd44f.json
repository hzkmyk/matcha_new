{"ast":null,"code":"var _jsxFileName = \"/Users/hazukimiyake/Documents/matcha/src/InitialProfile/index.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { withCookies } from 'react-cookie';\nimport './index.css';\n\nconst {\n  User\n} = require('../matcha_pb');\n\nclass InitialProfile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPermission = () => {\n      return new Promise((resolve, reject) => {\n        const {\n          cookies\n        } = this.props;\n        const uid = cookies.get('uid');\n        const session_id = cookies.get('session_id');\n        this.setState({\n          uid,\n          session_id\n        });\n        let gps = false;\n\n        if (window.confirm(`Allow 'Matcha' to use your location?`)) {\n          gps = true;\n        }\n\n        cookies.set('location', gps, {\n          path: '/'\n        });\n        this.setState({\n          gps\n        });\n        resolve(gps);\n      });\n    };\n\n    this.position = async () => {\n      await this.getPermission();\n      navigator.geolocation.getCurrentPosition(async position => {\n        this.setState({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n        const config = {\n          api_key: 'cbfa0f92c976b65f70bc676e05ee629a6b2a5ac'\n        };\n\n        if (this.state.gps) {\n          const location = this.state.result = await axios.get(`https://api.geocod.io/v1.4/reverse?q=${position.coords.latitude},${position.coords.longitude}&api_key=${config.api_key}`);\n          this.setState({\n            location: location.data.results[0].address_components.city\n          });\n        } else {\n          const ipAdd = await axios.get(`https://api.ipify.org/`);\n          let location = await axios.get(`https://json.geoiplookup.io/${ipAdd.data}`);\n          const arr = location.data.city.split(\" \");\n          location = arr[0];\n          this.setState({\n            location\n          });\n        }\n      }, err => console.log(err));\n    };\n\n    this.addProfileInfo = () => {\n      const request = new User();\n      const metaData = {\n        'user_id': this.state.uid,\n        'session_id': this.state.session_id\n      };\n      this.props.cookies.remove('missing_profile');\n      request.setAge(this.state.age);\n      request.setGender(this.state.gender);\n      request.setPreference(this.state.sexPreference);\n      request.setBio(this.state.biography);\n      request.setId(this.state.uid);\n      request.setLocation(this.state.location);\n\n      for (const interest in this.state.interests) {\n        request.addTags(this.state.interests[interest]);\n      }\n\n      window.Aclient.updateUser(request, metaData, (err, reply) => {\n        if (err) {\n          console.log(err.code);\n          console.log(err.message);\n        } else {\n          console.log(reply.getMessage());\n          this.props.history.push('/initialphotos');\n        }\n      });\n    };\n\n    this.addInterests = () => {\n      this.setState(state => {\n        const interests = state.interests.concat(state.value);\n        this.setState({\n          interestAdded: true\n        });\n        return {\n          interests,\n          value: ''\n        };\n      });\n    };\n\n    this.state = {\n      gender: '',\n      sexPreference: '',\n      biography: '',\n      value: '',\n      interests: [],\n      uid: 0,\n      session_id: '',\n      location: '',\n      age: 0,\n      interestAdded: false\n    };\n  }\n\n  componentDidMount() {\n    this.position();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"initialprofilepage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"MATCHA\"), React.createElement(\"div\", {\n      className: \"initialprofilemain\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"toggle\",\n      onSubmit: e => {\n        e.preventDefault();\n\n        if (this.state.interests) {\n          console.log('come');\n          this.addProfileInfo();\n        } else {\n          alert(\"Please put at least on interest\");\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tellusmore mergetwo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Tell Us More about Yourself\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Age\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      value: this.state.age,\n      name: \"age\",\n      required: true,\n      onChange: e => this.setState({\n        age: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Gender\"), React.createElement(\"div\", {\n      className: \"selections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"female\",\n      id: \"female\",\n      name: \"gender\",\n      required: true,\n      onChange: e => this.setState({\n        gender: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"female\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Female\"), React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"male\",\n      id: \"male\",\n      onChange: e => this.setState({\n        gender: e.target.value\n      }),\n      name: \"gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"male\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Male\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Interested in\"), React.createElement(\"div\", {\n      className: \"selections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"female\",\n      id: \"prefFemale\",\n      name: \"sexpref\",\n      required: true,\n      onChange: e => this.setState({\n        sexPreference: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"prefFemale\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Female\"), React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"male\",\n      id: \"prefMale\",\n      onChange: e => this.setState({\n        sexPreference: e.target.value\n      }),\n      name: \"sexpref\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"prefMale\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Male\"), React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"both\",\n      id: \"prefBoth\",\n      onChange: e => this.setState({\n        sexPreference: e.target.value\n      }),\n      name: \"sexpref\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"prefBoth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Both\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Interests\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.value,\n      onChange: e => this.setState({\n        value: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.addInterests,\n      disabled: !this.state.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Add\"), React.createElement(\"div\", {\n      className: \"addedinterests\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, this.state.interests.map((value, i) => {\n      return React.createElement(\"div\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, value);\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Bio\"), React.createElement(\"textarea\", {\n      required: true,\n      onChange: e => this.setState({\n        biography: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mergetwo saveupdate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"Next\")))), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"\\xA9 2020 MATCHA INC.\")));\n  }\n\n}\n\nexport default withCookies(InitialProfile);","map":{"version":3,"sources":["/Users/hazukimiyake/Documents/matcha/src/InitialProfile/index.js"],"names":["React","Component","axios","withCookies","User","require","InitialProfile","constructor","props","getPermission","Promise","resolve","reject","cookies","uid","get","session_id","setState","gps","window","confirm","set","path","position","navigator","geolocation","getCurrentPosition","latitude","coords","longitude","config","api_key","state","location","result","data","results","address_components","city","ipAdd","arr","split","err","console","log","addProfileInfo","request","metaData","remove","setAge","age","setGender","gender","setPreference","sexPreference","setBio","biography","setId","setLocation","interest","interests","addTags","Aclient","updateUser","reply","code","message","getMessage","history","push","addInterests","concat","value","interestAdded","componentDidMount","render","e","preventDefault","alert","target","map","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { withCookies } from 'react-cookie';\nimport './index.css';\nconst { User } = require('../matcha_pb');\n\nclass InitialProfile extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tgender: '',\n\t\t\tsexPreference: '',\n\t\t\tbiography: '',\n\t\t\tvalue: '',\n\t\t\tinterests: [],\n\t\t\tuid: 0,\n\t\t\tsession_id: '',\n\t\t\tlocation: '',\n\t\t\tage: 0,\n\t\t\tinterestAdded: false,\n\t\t}\n\t}\n\n\tgetPermission = () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst { cookies } = this.props;\n\t\t\tconst uid = cookies.get('uid');\n\t\t\tconst session_id = cookies.get('session_id');\n\t\t\tthis.setState({ uid, session_id });\n\t\t\tlet gps = false;\n\t\t\tif (window.confirm(`Allow 'Matcha' to use your location?`)) {\n\t\t\t\tgps = true;\n\t\t\t}\n\t\t\tcookies.set('location', gps, { path: '/' });\n\t\t\tthis.setState({ gps });\n\t\t\tresolve(gps);\n\t\t})\n\t}\n\t\n\tposition = async () => {\n\t\tawait this.getPermission();\n\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\tasync position => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tlatitude: position.coords.latitude,\n\t\t\t\t\tlongitude: position.coords.longitude\n\t\t\t\t})\n\t\t\t\tconst config = {\n\t\t\t\t\tapi_key: 'cbfa0f92c976b65f70bc676e05ee629a6b2a5ac'\n\t\t\t\t};\n\t\t\t\tif (this.state.gps) {\n\t\t\t\t\tconst location = this.state.result = await axios.get(`https://api.geocod.io/v1.4/reverse?q=${position.coords.latitude},${position.coords.longitude}&api_key=${config.api_key}`);\n\t\t\t\t\tthis.setState({ location: location.data.results[0].address_components.city });\n\t\t\t\t} else {\n\t\t\t\t\tconst ipAdd = await axios.get(`https://api.ipify.org/`);\n\t\t\t\t\tlet location = await axios.get(`https://json.geoiplookup.io/${ipAdd.data}`);\n\t\t\t\t\tconst arr = location.data.city.split(\" \");\n\t\t\t\t\tlocation = arr[0];\n\t\t\t\t\tthis.setState({ location });\n\t\t\t\t}\n\t\t\t},\n\t\t\t\terr => console.log(err)\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.position();\n\t}\n\n\taddProfileInfo = () => {\n\t\tconst request = new User();\n\t\tconst metaData = {\n\t\t\t'user_id': this.state.uid,\n\t\t\t'session_id': this.state.session_id\n\t\t}\n\t\tthis.props.cookies.remove('missing_profile');\n\t\trequest.setAge(this.state.age);\n\t\trequest.setGender(this.state.gender);\n\t\trequest.setPreference(this.state.sexPreference);\n\t\trequest.setBio(this.state.biography);\n\t\trequest.setId(this.state.uid);\n\t\trequest.setLocation(this.state.location);\n\t\tfor (const interest in this.state.interests) {\n\t\t\trequest.addTags(this.state.interests[interest]);\n\t\t}\n\t\twindow.Aclient.updateUser(request, metaData, (err, reply) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err.code);\n\t\t\t\tconsole.log(err.message);\n\t\t\t} else {\n\t\t\t\tconsole.log(reply.getMessage());\n\t\t\t\tthis.props.history.push('/initialphotos');\n\t\t\t}\n\t\t})\n\t}\n\n\taddInterests = () => {\n\t\tthis.setState(state => {\n\t\t\tconst interests = state.interests.concat(state.value);\n\t\t\tthis.setState({ interestAdded: true });\n\t\t\treturn {\n\t\t\t\tinterests,\n\t\t\t\tvalue: '',\n\t\t\t};\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"initialprofilepage\">\n\t\t\t\t<header>MATCHA</header>\n\t\t\t\t<div className=\"initialprofilemain\">\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tclassName=\"toggle\"\n\t\t\t\t\t\t\tonSubmit={e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (this.state.interests) {\n\t\t\t\t\t\t\t\t\tconsole.log('come');\n\t\t\t\t\t\t\t\t\tthis.addProfileInfo();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\talert(\"Please put at least on interest\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"tellusmore mergetwo\">Tell Us More about Yourself</div>\n\t\t\t\t\t\t\t<div>Age</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tvalue={this.state.age}\n\t\t\t\t\t\t\t\tname=\"age\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tonChange={e => this.setState({ age: e.target.value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>Gender</div>\n\t\t\t\t\t\t\t<div className=\"selections\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tvalue=\"female\"\n\t\t\t\t\t\t\t\t\tid=\"female\"\n\t\t\t\t\t\t\t\t\tname=\"gender\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ gender: e.target.value })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label htmlFor=\"female\">Female</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tvalue=\"male\"\n\t\t\t\t\t\t\t\t\tid=\"male\"\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ gender: e.target.value })}\n\t\t\t\t\t\t\t\t\tname=\"gender\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label htmlFor=\"male\">Male</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>Interested in</div>\n\t\t\t\t\t\t\t<div className=\"selections\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tvalue=\"female\"\n\t\t\t\t\t\t\t\t\tid=\"prefFemale\"\n\t\t\t\t\t\t\t\t\tname=\"sexpref\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ sexPreference: e.target.value })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label htmlFor=\"prefFemale\">Female</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tvalue=\"male\"\n\t\t\t\t\t\t\t\t\tid=\"prefMale\"\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ sexPreference: e.target.value })}\n\t\t\t\t\t\t\t\t\tname=\"sexpref\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label htmlFor=\"prefMale\">Male</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tvalue=\"both\"\n\t\t\t\t\t\t\t\t\tid=\"prefBoth\"\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ sexPreference: e.target.value })}\n\t\t\t\t\t\t\t\t\tname=\"sexpref\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label htmlFor=\"prefBoth\">Both</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>Interests</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ value: e.target.value })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={this.addInterests}\n\t\t\t\t\t\t\t\t\tdisabled={!this.state.value}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div className=\"addedinterests\">\n\t\t\t\t\t\t\t\t\t{this.state.interests.map((value, i) => {\n\t\t\t\t\t\t\t\t\treturn <div key={i}>{value}</div>\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>Bio</div>\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonChange={e => this.setState({ biography: e.target.value })}\n\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t<div className=\"mergetwo saveupdate\">\n\t\t\t\t\t\t\t\t<button type=\"submit\">Next</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t<footer>\n\t\t\t\t\t<div>© 2020 MATCHA INC.</div>\n\t\t\t\t</footer>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default withCookies(InitialProfile);"]},"metadata":{},"sourceType":"module"}