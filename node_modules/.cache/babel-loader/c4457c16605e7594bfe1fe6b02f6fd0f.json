{"ast":null,"code":"var _jsxFileName = \"/Users/hazukimiyake/Documents/matcha/src/Test2/components/Content.js\";\nimport React, { Component } from \"react\";\nimport { withCookies } from 'react-cookie';\nimport \"../../MyPage/index.css\";\n\nconst {\n  User\n} = require('../../matcha_pb');\n\nconst {\n  imageRequest\n} = require('../../matcha_pb');\n\nconst request = new User();\n\nclass Content extends Component {\n  constructor(props) {\n    super(props);\n    this.metaData = {\n      'user_id': this.props.cookies.get('uid'),\n      'session_id': this.props.cookies.get('session_id')\n    };\n\n    this.updateUserInfo = updatedInfo => {\n      const uid = this.props.cookies.get('uid');\n      const session_id = this.props.cookies.get('session_id');\n      const metaData = {\n        'user_id': uid,\n        'session_id': session_id\n      };\n\n      switch (updatedInfo) {\n        case 'username':\n          request.setUsername(this.state.username);\n          break;\n\n        case 'firstName':\n          request.setFirstname(this.state.firstName);\n          break;\n\n        case 'lastName':\n          request.setLastname(this.state.lastName);\n          break;\n\n        case 'email':\n          request.setEmail(this.state.email);\n          break;\n      }\n\n      window.Aclient.updateUser(request, metaData, (err, reply) => {\n        if (err) {\n          console.log(err.code, err.message);\n        } else {\n          console.log(reply.getMessage());\n\n          if (updatedInfo == 'email') {\n            this.props.history.push('/verifynewemail');\n          }\n        }\n      });\n    };\n\n    this.getUserInfo = () => {\n      const uid = this.props.cookies.get('uid');\n      const session_id = this.props.cookies.get('session_id');\n      const metaData = {\n        'user_id': uid,\n        'session_id': session_id\n      };\n      request.setId(uid);\n      window.Aclient.getUser(request, metaData, (err, reply) => {\n        if (err) {\n          console.log(err.code);\n          console.log(err.message);\n        } else {\n          this.setState({\n            username: reply.getUsername(),\n            firstName: reply.getFirstname(),\n            lastName: reply.getLastname(),\n            email: reply.getEmail(),\n            gender: reply.getGender(),\n            preference: reply.getPreference(),\n            age: reply.getAge(),\n            fameRating: reply.getFamerating(),\n            location: reply.getLocation(),\n            interests: reply.getTagsList(),\n            bio: reply.getBio(),\n            seenHistory: reply.getSeenhistoryList()\n          });\n        }\n      });\n    };\n\n    this.getImages = () => {\n      return new Promise((resolve, reject) => {\n        const request = new imageRequest();\n        let arr = [];\n        const uid = this.props.cookies.get('uid');\n        const session_id = this.props.cookies.get('session_id');\n        const metaData = {\n          'user_id': uid,\n          'session_id': session_id\n        };\n        request.setUserid(uid);\n        request.setAll(true);\n        const stream = window.Aclient.getImages(request, metaData);\n        stream.on('data', function (response) {\n          const d = response.getImage_asB64();\n          arr.push(d);\n        });\n        stream.on('status', function (response) {\n          console.log(response.code);\n          console.log(response.detail);\n        });\n        stream.on('error', function (err) {\n          console.log(`error: ${err.message} code is: ${err.code}`);\n        });\n        stream.on('end', function () {\n          resolve(arr);\n        });\n      });\n    };\n\n    this.allSet = async () => {\n      try {\n        const data = await this.getImages();\n        this.setState({\n          data\n        });\n      } catch (error) {\n        console.log(error.response);\n      }\n    };\n\n    this.state = {\n      username: 'Username',\n      firstName: 'First Name',\n      lastName: 'Last Name',\n      gender: 'Gender',\n      email: 'Email Address',\n      preference: 'Interested in',\n      interests: [],\n      bio: 'Bio',\n      age: 20,\n      pics: [],\n      fameRating: 50,\n      location: 'Location',\n      seenHistory: [],\n      data: [],\n      images: [{\n        original: '',\n        thumbnail: ''\n      }] // uid: this.props.cookies.get('uid'),\n      // session_id: this.props.cookies.get('session_id')\n\n    };\n  }\n\n  componentDidMount() {\n    this.getUserInfo();\n    this.allSet();\n  }\n\n  render() {\n    const contentStyle = {\n      paddingTop: 20,\n      paddingRight: 20,\n      paddingBottom: 80,\n      paddingLeft: this.props.style.showSidebar ? 200 : 10\n    };\n    const images = this.state.data;\n    let combined = [];\n\n    for (let i = 1; i < images.length; i++) {\n      let temp = { ...this.state.images\n      };\n      temp.original = \"data:image/jpeg;base64,\" + images[i];\n      temp.thumbnail = \"data:image/jpeg;base64,\" + images[i];\n      combined.push(temp);\n    }\n\n    return React.createElement(\"div\", {\n      className: \"myprofilepage\",\n      style: contentStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"myprofilepagecon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        this.updateUserInfo('firstName');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"First Name: \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: this.state.firstName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Update\"))), React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        this.updateUserInfo('lastName');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Last Name: \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: this.state.lastName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"Update\"))), React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        this.updateUserInfo('username');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Username: \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"Update\"))), React.createElement(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        this.updateUserInfo('email');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Email Address: \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"Update\")))));\n  }\n\n}\n\n;\nexport default withCookies(Content);","map":{"version":3,"sources":["/Users/hazukimiyake/Documents/matcha/src/Test2/components/Content.js"],"names":["React","Component","withCookies","User","require","imageRequest","request","Content","constructor","props","metaData","cookies","get","updateUserInfo","updatedInfo","uid","session_id","setUsername","state","username","setFirstname","firstName","setLastname","lastName","setEmail","email","window","Aclient","updateUser","err","reply","console","log","code","message","getMessage","history","push","getUserInfo","setId","getUser","setState","getUsername","getFirstname","getLastname","getEmail","gender","getGender","preference","getPreference","age","getAge","fameRating","getFamerating","location","getLocation","interests","getTagsList","bio","getBio","seenHistory","getSeenhistoryList","getImages","Promise","resolve","reject","arr","setUserid","setAll","stream","on","response","d","getImage_asB64","detail","allSet","data","error","pics","images","original","thumbnail","componentDidMount","render","contentStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","style","showSidebar","combined","i","length","temp","e","preventDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withCookies } from 'react-cookie';\nimport \"../../MyPage/index.css\"\nconst { User } = require('../../matcha_pb');\nconst { imageRequest } = require('../../matcha_pb');\nconst request = new User();\n\nclass Content extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tusername: 'Username',\n\t\t\tfirstName: 'First Name',\n\t\t\tlastName: 'Last Name',\n\t\t\tgender: 'Gender',\n\t\t\temail: 'Email Address',\n\t\t\tpreference: 'Interested in',\n\t\t\tinterests: [],\n\t\t\tbio: 'Bio',\n\t\t\tage: 20,\n\t\t\tpics: [],\n\t\t\tfameRating: 50,\n\t\t\tlocation: 'Location',\n\t\t\tseenHistory: [],\n\t\t\tdata: [],\n\t\t\timages: [{\n\t\t\t\toriginal: '',\n\t\t\t\tthumbnail: ''\n\t\t\t}],\n\t\t\t// uid: this.props.cookies.get('uid'),\n\t\t\t// session_id: this.props.cookies.get('session_id')\n\t\t}\n\t}\n\n\tmetaData = {\n\t\t'user_id': this.props.cookies.get('uid'),\n\t\t'session_id': this.props.cookies.get('session_id')\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getUserInfo();\n\t\tthis.allSet();\n\t}\n\n\tupdateUserInfo = (updatedInfo) => {\n\t\tconst uid = this.props.cookies.get('uid');\n\t\tconst session_id = this.props.cookies.get('session_id')\n\t\tconst metaData = {\n\t\t\t'user_id': uid,\n\t\t\t'session_id': session_id\n\t\t}\n\t\tswitch (updatedInfo) {\n\t\t\tcase 'username':\n\t\t\t\trequest.setUsername(this.state.username);\n\t\t\t\tbreak;\n\t\t\tcase 'firstName':\n\t\t\t\trequest.setFirstname(this.state.firstName);\n\t\t\t\tbreak;\n\t\t\tcase 'lastName':\n\t\t\t\trequest.setLastname(this.state.lastName);\n\t\t\t\tbreak;\n\t\t\tcase 'email':\n\t\t\t\trequest.setEmail(this.state.email);\n\t\t\t\tbreak;\n\t\t}\n\t\twindow.Aclient.updateUser(request, metaData, (err, reply) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err.code, err.message);\n\t\t\t} else {\n\t\t\t\tconsole.log(reply.getMessage());\n\t\t\t\tif (updatedInfo == 'email') {\n\t\t\t\t\tthis.props.history.push('/verifynewemail');\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetUserInfo = () => {\n\t\tconst uid = this.props.cookies.get('uid');\n\t\tconst session_id = this.props.cookies.get('session_id')\n\t\tconst metaData = {\n\t\t\t'user_id': uid,\n\t\t\t'session_id': session_id\n\t\t}\n\t\trequest.setId(uid);\n\t\twindow.Aclient.getUser(request, metaData, (err, reply) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err.code);\n\t\t\t\tconsole.log(err.message);\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tusername: reply.getUsername(),\n\t\t\t\t\tfirstName: reply.getFirstname(),\n\t\t\t\t\tlastName: reply.getLastname(),\n\t\t\t\t\temail: reply.getEmail(),\n\t\t\t\t\tgender: reply.getGender(),\n\t\t\t\t\tpreference: reply.getPreference(),\n\t\t\t\t\tage: reply.getAge(),\n\t\t\t\t\tfameRating: reply.getFamerating(),\n\t\t\t\t\tlocation: reply.getLocation(),\n\t\t\t\t\tinterests: reply.getTagsList(),\n\t\t\t\t\tbio: reply.getBio(),\n\t\t\t\t\tseenHistory: reply.getSeenhistoryList()\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tgetImages = () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst request = new imageRequest();\n\t\t\tlet arr = [];\n\t\t\tconst uid = this.props.cookies.get('uid');\n\t\t\tconst session_id = this.props.cookies.get('session_id');\n\t\t\tconst metaData = {\n\t\t\t\t'user_id': uid,\n\t\t\t\t'session_id': session_id\n\t\t\t}\n\t\t\trequest.setUserid(uid);\n\t\t\trequest.setAll(true);\n\t\t\tconst stream = window.Aclient.getImages(request, metaData);\n\t\t\tstream.on('data', function(response) {\n\t\t\t\tconst d = response.getImage_asB64();\n\t\t\t\tarr.push(d);\n\t\t\t});\n\t\t\tstream.on('status', function(response) {\n\t\t\t\tconsole.log(response.code);\n\t\t\t\tconsole.log(response.detail);\n\t\t\t});\n\t\t\tstream.on('error', function(err) {\n\t\t\t\tconsole.log(`error: ${err.message} code is: ${err.code}`);\n\t\t\t});\n\t\t\tstream.on('end', function(){\n\t\t\t\tresolve(arr);\n\t\t\t})\n\t\t})\n\t}\n\t\n\tallSet = async () => {\n\t\ttry {\n\t\t\tconst data = await this.getImages();\n\t\t\tthis.setState({data});\n\t\t} catch(error) {\n\t\t\tconsole.log(error.response);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst contentStyle = {\n\t\t\tpaddingTop: 20,\n\t\t\tpaddingRight: 20,\n\t\t\tpaddingBottom: 80,\n\t\t\tpaddingLeft: this.props.style.showSidebar? 200 : 10\n\t\t};\n\t\tconst images = this.state.data;\n\t\tlet combined = [];\n\t\tfor (let i = 1; i < images.length; i++) {\n\t\t\tlet temp = {...this.state.images};\n\t\t\ttemp.original = \"data:image/jpeg;base64,\" + images[i];\n\t\t\ttemp.thumbnail = \"data:image/jpeg;base64,\" + images[i];\n\t\t\tcombined.push(temp);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"myprofilepage\" style={contentStyle}>\n\t\t\t\t<div className=\"myprofilepagecon\">\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.updateUserInfo('firstName');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div>First Name: </div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder={this.state.firstName}\n\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button type=\"submit\">Update</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.updateUserInfo('lastName');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div>Last Name: </div>\n\t\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder={this.state.lastName}\n\n\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t<button type=\"submit\">Update</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.updateUserInfo('username');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div>Username: </div>\n\t\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder={this.state.username}\n\t\t\t\t\t/></div>\n\t\t\t\t\t<div><button type=\"submit\">Update</button></div>\n\t\t\t\t</form>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.updateUserInfo('email');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div>Email Address: </div>\n\t\t\t\t\t<div><input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder={this.state.email}\n\n\t\t\t\t\t/></div>\n\t\t\t\t\t<div><button type=\"submit\">Update</button></div>\n\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n};\n\nexport default withCookies(Content);\n"]},"metadata":{},"sourceType":"module"}