{"ast":null,"code":"var _jsxFileName = \"/Users/hazukimiyake/Documents/matcha/src/MyPage/index.js\";\nimport React, { Component } from 'react';\nimport { withCookies } from 'react-cookie';\n\nconst {\n  User\n} = require('../matcha_pb');\n\nconst {\n  imageRequest\n} = require('../matcha_pb');\n\nclass MyPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getUserInfo = () => {\n      const uid = this.props.cookies.get('uid');\n      const temp = this.props.cookies.get('session_id');\n      const request = new User();\n      request.setId(uid);\n      let metadata = {\n        'user_id': uid,\n        'session_id': temp\n      };\n      window.Aclient.getUser(request, metadata, (err, reply) => {\n        if (err) {\n          console.log(err.code);\n          console.log(err.message);\n        } else {\n          this.setState({\n            username: reply.getUsername(),\n            firstName: reply.getFirstname(),\n            lastName: reply.getLastname(),\n            gender: reply.getGender(),\n            preference: reply.getPreference(),\n            age: reply.getAge(),\n            fameRating: reply.getFamerating(),\n            location: reply.getLocation(),\n            interests: reply.getTagsList(),\n            bio: reply.getBio(),\n            seenHistory: reply.getSeenhistoryList()\n          });\n        }\n      });\n    };\n\n    this.getImages = () => {\n      return new Promise((resolve, reject) => {\n        const request = new imageRequest();\n        let arr = [];\n        const uid = this.props.cookies.get('uid');\n        const session_id = this.props.cookies.get('session_id');\n        const metaData = {\n          'user_id': uid,\n          'session_id': session_id\n        };\n        request.setUserid(ui);\n        request.setCount(2);\n        const stream = window.Aclient.getImages(request, metaData);\n        stream.on('data', function (response) {\n          // console.log(response.getImage_asB64());\n          const d = response.getImage_asB64();\n          arr.push(d);\n        });\n        stream.on('error', function (err) {\n          console.log(`error: ${err}`);\n        });\n        stream.on('end', function () {\n          resolve(arr);\n        });\n      });\n    };\n\n    this.allSet = async () => {\n      try {\n        const data = await this.getImages();\n        this.setState({\n          data\n        });\n      } catch (error) {\n        console.log(error.response);\n      }\n    };\n\n    this.state = {\n      username: '',\n      firstName: '',\n      lastName: '',\n      gender: '',\n      preference: '',\n      interests: [],\n      bio: '',\n      age: 0,\n      pics: [],\n      fameRating: 0,\n      location: '',\n      seenHistory: [],\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    this.getUserInfo();\n    this.allSet();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.state.username), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, this.state.firstName), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.lastName), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, this.state.gender), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.state.preference), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, this.state.age), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.state.fameRating), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.state.location), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, this.state.interests.map((value, i) => {\n      return React.createElement(\"span\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, value, \" \");\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, this.state.bio), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, this.state.seenHistory));\n  }\n\n}\n\nexport default withCookies(MyPage);","map":{"version":3,"sources":["/Users/hazukimiyake/Documents/matcha/src/MyPage/index.js"],"names":["React","Component","withCookies","User","require","imageRequest","MyPage","constructor","props","getUserInfo","uid","cookies","get","temp","request","setId","metadata","window","Aclient","getUser","err","reply","console","log","code","message","setState","username","getUsername","firstName","getFirstname","lastName","getLastname","gender","getGender","preference","getPreference","age","getAge","fameRating","getFamerating","location","getLocation","interests","getTagsList","bio","getBio","seenHistory","getSeenhistoryList","getImages","Promise","resolve","reject","arr","session_id","metaData","setUserid","ui","setCount","stream","on","response","d","getImage_asB64","push","allSet","data","error","state","pics","componentDidMount","render","map","value","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withCookies } from 'react-cookie';\nconst { User } = require('../matcha_pb');\nconst { imageRequest } = require('../matcha_pb');\n\nclass MyPage extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tusername: '',\n\t\t\tfirstName: '',\n\t\t\tlastName: '',\n\t\t\tgender: '',\n\t\t\tpreference: '',\n\t\t\tinterests: [],\n\t\t\tbio: '',\n\t\t\tage: 0,\n\t\t\tpics: [],\n\t\t\tfameRating: 0,\n\t\t\tlocation: '',\n\t\t\tseenHistory: [],\n\t\t\tdata: []\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getUserInfo();\n\t\tthis.allSet();\n\t}\n\n\tgetUserInfo = () => {\n\t\tconst uid = this.props.cookies.get('uid');\n\t\tconst temp = this.props.cookies.get('session_id');\n\t\tconst request = new User();\n\t\trequest.setId(uid);\n\t\tlet metadata = {\n\t\t\t'user_id': uid,\n\t\t\t'session_id': temp\n\t\t}\n\t\twindow.Aclient.getUser(request, metadata, (err, reply) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err.code);\n\t\t\t\tconsole.log(err.message);\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tusername: reply.getUsername(),\n\t\t\t\t\tfirstName: reply.getFirstname(),\n\t\t\t\t\tlastName: reply.getLastname(),\n\t\t\t\t\tgender: reply.getGender(),\n\t\t\t\t\tpreference: reply.getPreference(),\n\t\t\t\t\tage: reply.getAge(),\n\t\t\t\t\tfameRating: reply.getFamerating(),\n\t\t\t\t\tlocation: reply.getLocation(),\n\t\t\t\t\tinterests: reply.getTagsList(),\n\t\t\t\t\tbio: reply.getBio(),\n\t\t\t\t\tseenHistory: reply.getSeenhistoryList()\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tgetImages = () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst request = new imageRequest();\n\t\t\tlet arr = [];\n\t\t\tconst uid = this.props.cookies.get('uid');\n\t\t\tconst session_id = this.props.cookies.get('session_id');\n\t\t\tconst metaData = {\n\t\t\t\t'user_id': uid,\n\t\t\t\t'session_id': session_id\n\t\t\t}\n\t\t\trequest.setUserid(ui);\n\t\t\trequest.setCount(2);\n\t\t\tconst stream = window.Aclient.getImages(request, metaData);\n\t\t\tstream.on('data', function(response) {\n\t\t\t\t// console.log(response.getImage_asB64());\n\t\t\t\tconst d = response.getImage_asB64();\n\t\t\t\tarr.push(d);\n\t\t\t});\n\t\t\tstream.on('error', function(err) {\n\t\t\t\tconsole.log(`error: ${err}`);\n\t\t\t});\n\t\t\tstream.on('end', function(){\n\t\t\t\tresolve(arr);\n\t\t\t})\n\t\t})\n\t}\n\t\t\t\t\t\n\tallSet = async () => {\n\t\ttry {\n\t\t\tconst data = await this.getImages();\n\t\t\tthis.setState({data});\n\t\t} catch(error) {\n\t\t\tconsole.log(error.response);\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>{this.state.username}</div>\n\t\t\t\t<div>{this.state.firstName}</div>\n\t\t\t\t<div>{this.state.lastName}</div>\n\t\t\t\t<div>{this.state.gender}</div>\n\t\t\t\t<div>{this.state.preference}</div>\n\t\t\t\t<div>{this.state.age}</div>\n\t\t\t\t<div>{this.state.fameRating}</div>\n\t\t\t\t<div>{this.state.location}</div>\n\t\t\t\t<div>{this.state.interests.map((value, i) => {\n\t\t\t\t\treturn <span key={i}>{value} </span>\n\t\t\t\t})}</div>\n\t\t\t\t<div>{this.state.bio}</div>\n\t\t\t\t<div>{this.state.seenHistory}</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default withCookies(MyPage);"]},"metadata":{},"sourceType":"module"}